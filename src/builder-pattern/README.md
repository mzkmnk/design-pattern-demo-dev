# ビルダーパターン実装課題：カスタマイズカーの製造システム

## 概要
この課題では、ビルダーパターンを用いてカスタマイズカーの製造システムを実装します。クライアントは、用途や好みに応じて車の各パーツ（エンジン、ボディ、ホイール、内装、追加オプションなど）を組み合わせ、最終的な車両を完成させます。システムは、複数の部品やオプションの設定、さらに依存関係の整合性チェックなどの機能を実装する必要があり、難易度は従来の課題よりも高くなっています。

## 課題の要件

### 1. 製品クラス（Product）の設計
- **Car クラス**を作成し、以下のプロパティを含める：
    - エンジンタイプ（例： "V6", "V8", "Electric", "Hybrid"）
    - ボディタイプ（例： "Sedan", "SUV", "Sports"）
    - カラー（例： "Red", "Blue", "Black" など）
    - ホイール（例： "Standard", "Sport"）
    - 内装（例： "Leather", "Fabric"）
    - 追加オプション（例： サンルーフ、ナビゲーション、サウンドシステムなど）
- 必要に応じて、その他の属性やメソッドを追加し、車両の詳細な仕様を定義する。

### 2. 抽象ビルダーの定義
- **CarBuilder インターフェースまたは抽象クラス**を作成し、以下のような抽象メソッドを定義する：
    - `setEngine(engineType: string): this`
    - `setBody(bodyType: string): this`
    - `setColor(color: string): this`
    - `setWheels(wheelType: string): this`
    - `setInterior(interior: string): this`
    - `addOption(option: string): this`
    - `getResult(): Car`
- 各メソッドはメソッドチェーンをサポートする形で実装できるようにする。

### 3. 具体的なビルダーの実装
- 複数の具体的なビルダークラス（例： **SportsCarBuilder**, **SUVBuilder**）を実装する。
    - それぞれのビルダーは、特定の車種に合わせた初期設定やデフォルトオプションを自動設定する。
    - 例：SportsCarBuilder はエンジンを "V8" または "Turbo" に、ホイールを "Sport" に設定するなど、車種特有のルールを実装する。
    - 各ビルダー内で、部品同士の依存関係（例：スポーツカーの場合、サンルーフの選択を制限するなど）の整合性チェックを行う。

### 4. ディレクター（Director）の実装
- **CarDirector クラス**を作成し、クライアントの要求に応じた製造手順を定義する。
    - ディレクターは、指定されたビルダーを用いて「スポーツカー構成」「エコカー構成」などの具体的な構成例を組み立て、最終的に完成した Car オブジェクトを返す。
    - 複数の構成パターンをサポートし、製造手順のバリエーションを実装する。

### 5. クライアントコードでの動作確認
- クライアントコードにおいて、CarDirector を利用して異なる車種（例：スポーツカー、SUV、エコカーなど）のサンプルを作成する。
- 各車両の構成が正しく反映されるか、また整合性チェックにより不正な設定が防止されるかを確認する。

## 追加のチャレンジ（任意）
- **メソッドチェーンの実装:**  
  ビルダーの各メソッド呼び出しを連鎖できるように実装し、直感的でコンパクトなコードを実現する。
- **動的なオプション設定:**  
  クライアントが外部設定ファイルやユーザー入力に基づいてオプションを動的に追加できる仕組みを導入する。
- **エラーハンドリングと整合性チェック:**  
  設定されたオプションの依存関係（例：特定のボディタイプには特定のエンジンが必要など）を検証し、不整合があれば例外や警告を発する機能を実装する。
- **ユニットテスト:**  
  各ビルダーおよびディレクターの主要機能に対してユニットテストを実装し、正しい車両が生成されることを検証する。

## 重要なポイントまとめ
- **製品クラスの詳細設計:**  
  Car クラスに各種パーツとオプションを明確に定義し、ビルダーが生成する対象を詳細に設計する。
- **抽象ビルダーと具体ビルダー:**  
  抽象ビルダーで基本的な構築手順を定義し、具体的なビルダーで車種ごとの特性やルールを実装する。
- **ディレクターの利用:**  
  ディレクターを用いることで、構築手順を統一し、クライアントコードはシンプルなインターフェースで車両生成を行えるようにする。
- **拡張性と整合性:**  
  オプションの追加や依存関係の整合性チェックを取り入れ、将来的な拡張に柔軟に対応できる設計を目指す。